{"version":3,"names":[],"mappings":"","sources":["countryDetails.js"],"sourcesContent":["const countryData = document.querySelector('.country-data')\r\nconst themeSwitcher = document.querySelector('.theme-switcher-container')\r\nconst themeText = document.querySelector('#theme_text')\r\nconst moon = document.querySelector('.fa-moon')\r\nconst sun = document.querySelector('.fa-sun')\r\nconst backBtn = document.querySelector('.back-btn')\r\n\r\nconst countryName = sessionStorage.getItem('country')\r\nconst fetchData = await fetch(`https://restcountries.com/v3.1/name/${countryName}`)\r\nconst [jsonData] = await fetchData.json()\r\n\r\nconst matched = window.matchMedia('(prefers-color-scheme: dark)').matches\r\nconst formatNum = Intl.NumberFormat(navigator.language)\r\n\r\nclass App {\r\n   constructor() {\r\n      if (matched) this.switchTheme()\r\n      themeSwitcher.addEventListener('click', this.switchTheme)\r\n      this.renderCountry(jsonData)\r\n      backBtn.addEventListener('click', function () {\r\n         history.back()\r\n      })\r\n   }\r\n   renderCountry(country) {\r\n      document.title = `Rest Countries - ${country.name.common}`\r\n      let html = `\r\n            <div class=\"country__details\">\r\n               <div class=\"flag-container\">\r\n                  <img src=\"${country.flags.svg}\" alt=\"\">\r\n               </div>\r\n               <div class=\"sections\">\r\n                  <div class=\"section section1\">\r\n                     <h1>${country.name.common}</h1>\r\n                     <div class=\"native-name\">\r\n                        <span class=\"text-medium\">Native Name:</span>\r\n                        <span>${Object.values(country.name.nativeName)[0].official}</span>\r\n                     </div>\r\n                     <div class=\"population\">\r\n                        <span class=\"text-medium\">Population:</span>\r\n                        <span>${formatNum.format(country.population)}</span>\r\n                     </div>\r\n                     <div class=\"region\">\r\n                        <span class=\"text-medium\">Region:</span>\r\n                        <span>${country.region}</span>\r\n                     </div>\r\n                     <div class=\"sub-region\">\r\n                        <span class=\"text-medium\">Sub Region:</span>\r\n                        <span>${country.subregion}</span>\r\n                     </div>\r\n                     <div class=\"capital\">\r\n                        <span class=\"text-medium\">Capital:</span>\r\n                        <span>${country.capital}</span>\r\n                     </div>\r\n                  </div>\r\n                  <div class=\"section section2\">\r\n                     <div class=\"top-level-domain\">\r\n                        <span class=\"text-medium\">Top Level Domain:</span>\r\n                        <span>${country.tld}</span>\r\n                     </div>\r\n                     <div class=\"currencies\">\r\n                        <span class=\"text-medium\">Currencies:</span>\r\n                        <span>${Object.values(country.currencies)[0].name}</span>\r\n                     </div>\r\n                     <div class=\"languages\">\r\n                        <span class=\"text-medium\">Languages:</span>\r\n                        <span>${Object.values(country.languages)[0]}</span>\r\n                     </div>\r\n                  </div>\r\n               </div>\r\n            </div>`;\r\n      countryData.insertAdjacentHTML('beforeend', html)\r\n      if (country.borders) this.insertBorder(country)\r\n   }\r\n   async insertBorder(country) {\r\n      const sections = document.querySelector('.sections')\r\n      sections.insertAdjacentHTML('beforeend',\r\n         `<div class=\"border__countries\">\r\n            <h1>Border Countries:</h1>\r\n            <div class=\"borders\"></div>\r\n         </div>`\r\n      );\r\n      const bordersContainer = document.querySelector('.borders')\r\n      country.borders.forEach(async (border, i) => {\r\n         const borderName = await this.fetchBorderData(border)\r\n         if (i < 3)\r\n            bordersContainer.insertAdjacentHTML('beforeend',\r\n               `<div class=\"border\">${borderName}</div>`\r\n            )\r\n      })\r\n      bordersContainer.addEventListener('click', (e) => {\r\n         if (e.target.classList.contains('border')) this.renderBorder(e)\r\n      })\r\n   }\r\n   async fetchBorderData(name) {\r\n      const fetchBorderData = await fetch(`https://restcountries.com/v3.1/alpha/${name}`)\r\n      const [borderData] = await fetchBorderData.json()\r\n      return borderData.name.common\r\n   }\r\n   async renderBorder(e) {\r\n      const neighbourName = e.target.textContent.toLowerCase()\r\n\r\n      const fetchData = await fetch(`https://restcountries.com/v3.1/name/${neighbourName}`)\r\n      const [jsonData] = await fetchData.json()\r\n      console.log(jsonData);\r\n\r\n      countryData.innerHTML = ''\r\n      this.renderCountry(jsonData)\r\n   }\r\n   switchTheme() {\r\n      document.body.classList.toggle('dark-mode')\r\n      moon.classList.toggle('invisible')\r\n      sun.classList.toggle('invisible')\r\n\r\n      themeText.textContent =\r\n         `${document.body.classList.contains('dark-mode') ? 'Light Mode' : 'Dark Mode'}`;\r\n   }\r\n}\r\nconst app = new App()\r\n"],"file":"countryDetails.js"}